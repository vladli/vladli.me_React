import{r as n,t as g,c as b,a as e,u as k,j as u,B as p,R as N,M as S,d as j}from"./index-67684e51.js";import{L as _}from"./LoadingEffect-384bc2ea.js";import{i as l}from"./axiosAPI-1350b3d5.js";import{I}from"./Input-2218e67f.js";import{u as D}from"./useQuery-a496f71a.js";const m=n.forwardRef(({children:t,size:a,vertical:s,className:r,...i},o)=>{const c=g("input-group",r,b({[`input-group-${a}`]:a,"input-group-vertical":s}));return e("label",{...i,className:c,ref:o,children:t})});m.displayName="InputGroup";const R=({refetch:t})=>{const{t:a}=k("beginnerProjects"),[s,r]=n.useState("");return e("div",{className:"my-4",children:e("form",{onSubmit:c=>{c.preventDefault(),l.post("/api/todos/item",{text:s}).then(d=>{r(""),t()})},children:u(m,{className:"justify-center",children:[e(I,{name:"AddTodo",value:s,onChange:c=>{r(c.currentTarget.value)}}),e(p,{type:"submit",children:a("Todos.AddItem")})]})})})},E=n.forwardRef(({color:t,size:a,indeterminate:s,className:r,...i},o)=>{const c=g("checkbox",r,b({[`checkbox-${a}`]:a,[`checkbox-${t}`]:t})),d=n.useRef(null);return n.useImperativeHandle(o,()=>d.current),n.useEffect(()=>{d.current&&(s?d.current.indeterminate=!0:d.current.indeterminate=!1)},[s]),e("input",{...i,ref:d,type:"checkbox",className:c})});E.displayName="Checkbox";const w=({value:t,setEditedText:a})=>{const[s,r]=N.useState(t);return e("div",{children:u(m,{children:[e(I,{name:"EditItem",size:"xs",value:s,onChange:c=>r(c.currentTarget.value)}),e(p,{size:"xs",onClick:()=>{a(s)},children:"âœ“"})]})})},F=({item:t,refetch:a})=>{const[s,r]=n.useState(t.completed),[i,o]=n.useState(!1),[c,d]=n.useState(!1),[f,T]=n.useState(""),[h,x]=n.useState(!1),v=q=>{o(!0),r(!s)},y=()=>{d(!0)},C=()=>{x(!0)};return n.useEffect(()=>{i&&l.put("/api/todos/item",null,{params:{_id:t._id,completed:s}}).then(()=>o(!1))},[s]),n.useEffect(()=>{c&&l.put("/api/todos/item",null,{params:{_id:t._id,text:f}}).then(()=>{a(),d(!1)})},[f]),n.useEffect(()=>{h&&l.delete("/api/todos/item",{params:{_id:t._id}}).then(()=>{a(),x(!1)})},[h]),u("li",{className:"mb-2 flex gap-2",children:[e(E,{checked:s,onChange:v,disabled:i}),c?e(w,{value:t.text,setIsEditing:d,setEditedText:T}):e("span",{onDoubleClick:y,children:t.text}),e("div",{className:"flex basis-10/12 justify-end",children:e(p,{shape:"square",size:"sm",color:"ghost",disabled:h,onClick:C,children:e(S,{color:"red",size:20})})})]})},z=()=>{const{t}=k("beginnerProjects"),{isLoading:a,isError:s,data:r,refetch:i}=D({queryKey:["todos"],queryFn:async()=>{const{data:o}=await l.get("/api/todos/item");return o}});return a||!r?e(_,{}):u(j,{className:"w-1/2 p-4",children:[e("h5",{className:"text-center",children:t("Todos.title")}),e("p",{className:"text-center",children:t("Todos.EditTextInfo")}),e(R,{refetch:i}),e("ol",{start:1,children:r.map(o=>e(F,{item:o,refetch:i},o._id))})]})};export{z as default};
