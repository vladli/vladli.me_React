import{r as N,t as Le,c as Ee,a as k,z as Ie,j as K,B as ue,M as Me,R as B,h as Z,u as xe,i as Ne,Q as De,d as je}from"./index-a354bc22.js";import{L as Pe}from"./LoadingEffect-cc93b088.js";import{i as ze}from"./axiosAPI-136eead3.js";import{I as ke}from"./Input-737cfbf8.js";import{u as Ue}from"./useQuery-488400ec.js";const fe=N.forwardRef(({children:r,size:e,vertical:i,className:t,...s},o)=>{const h=Le("input-group",t,Ee({[`input-group-${e}`]:e,"input-group-vertical":i}));return k("label",{...s,className:h,children:r})});fe.displayName="InputGroup";const We=({refetch:r})=>{const[e,i]=N.useState(""),[t,s]=N.useState(""),o=Ie.string().min(1);return k("div",{className:"my-4",children:K("form",{onSubmit:b=>{b.preventDefault();const g=o.safeParse(e);g.success?ze.post("/api/todos/item",{text:e}).then(()=>{i(""),r()}):s(g.error.format()._errors[0])},children:[K(fe,{className:"justify-center",children:[k(ke,{name:"AddTodo",color:t?"error":"ghost",value:e,onChange:b=>{i(b.currentTarget.value);const g=o.safeParse(b.currentTarget.value);g.success?s(""):s(g.error.format()._errors[0])},size:"sm"}),k(ue,{type:"submit",size:"sm",children:k(Me,{})})]}),t?k("div",{className:"text-center",children:t}):null]})})},Ae=N.forwardRef(({color:r,size:e,indeterminate:i,className:t,...s},o)=>{const h=Le("checkbox",t,Ee({[`checkbox-${e}`]:e,[`checkbox-${r}`]:r})),d=N.useRef(null);return N.useImperativeHandle(o,()=>d.current),N.useEffect(()=>{d.current&&(i?d.current.indeterminate=!0:d.current.indeterminate=!1)},[i]),k("input",{...s,ref:d,type:"checkbox",className:h})});Ae.displayName="Checkbox";function ye(r,e,i,t,s,o,h){try{var d=r[o](h),b=d.value}catch(g){i(g);return}d.done?e(b):Promise.resolve(b).then(t,s)}function ne(r){return function(){var e=this,i=arguments;return new Promise(function(t,s){var o=r.apply(e,i);function h(b){ye(o,t,s,h,d,"next",b)}function d(b){ye(o,t,s,h,d,"throw",b)}h(void 0)})}}function j(){return j=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(r[t]=i[t])}return r},j.apply(this,arguments)}var he={},Be={get exports(){return he},set exports(r){he=r}},le={},Ge={get exports(){return le},set exports(r){le=r}};(function(r){function e(i){return r.exports=e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r.exports.__esModule=!0,r.exports.default=r.exports,e(i)}r.exports=e,r.exports.__esModule=!0,r.exports.default=r.exports})(Ge);(function(r){var e=le.default;function i(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */r.exports=i=function(){return t},r.exports.__esModule=!0,r.exports.default=r.exports;var t={},s=Object.prototype,o=s.hasOwnProperty,h=typeof Symbol=="function"?Symbol:{},d=h.iterator||"@@iterator",b=h.asyncIterator||"@@asyncIterator",g=h.toStringTag||"@@toStringTag";function f(a,n,l){return Object.defineProperty(a,n,{value:l,enumerable:!0,configurable:!0,writable:!0}),a[n]}try{f({},"")}catch{f=function(l,u,y){return l[u]=y}}function x(a,n,l,u){var y=n&&n.prototype instanceof A?n:A,S=Object.create(y.prototype),C=new G(u||[]);return S._invoke=function(D,U,E){var R="suspendedStart";return function(W,ge){if(R==="executing")throw new Error("Generator is already running");if(R==="completed"){if(W==="throw")throw ge;return $()}for(E.method=W,E.arg=ge;;){var me=E.delegate;if(me){var se=m(me,E);if(se){if(se===_)continue;return se}}if(E.method==="next")E.sent=E._sent=E.arg;else if(E.method==="throw"){if(R==="suspendedStart")throw R="completed",E.arg;E.dispatchException(E.arg)}else E.method==="return"&&E.abrupt("return",E.arg);R="executing";var J=T(D,U,E);if(J.type==="normal"){if(R=E.done?"completed":"suspendedYield",J.arg===_)continue;return{value:J.arg,done:E.done}}J.type==="throw"&&(R="completed",E.method="throw",E.arg=J.arg)}}}(a,l,C),S}function T(a,n,l){try{return{type:"normal",arg:a.call(n,l)}}catch(u){return{type:"throw",arg:u}}}t.wrap=x;var _={};function A(){}function z(){}function w(){}var I={};f(I,d,function(){return this});var M=Object.getPrototypeOf,F=M&&M(M(P([])));F&&F!==s&&o.call(F,d)&&(I=F);var c=w.prototype=A.prototype=Object.create(I);function v(a){["next","throw","return"].forEach(function(n){f(a,n,function(l){return this._invoke(n,l)})})}function p(a,n){function l(y,S,C,D){var U=T(a[y],a,S);if(U.type!=="throw"){var E=U.arg,R=E.value;return R&&e(R)=="object"&&o.call(R,"__await")?n.resolve(R.__await).then(function(W){l("next",W,C,D)},function(W){l("throw",W,C,D)}):n.resolve(R).then(function(W){E.value=W,C(E)},function(W){return l("throw",W,C,D)})}D(U.arg)}var u;this._invoke=function(y,S){function C(){return new n(function(D,U){l(y,S,D,U)})}return u=u?u.then(C,C):C()}}function m(a,n){var l=a.iterator[n.method];if(l===void 0){if(n.delegate=null,n.method==="throw"){if(a.iterator.return&&(n.method="return",n.arg=void 0,m(a,n),n.method==="throw"))return _;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var u=T(l,a.iterator,n.arg);if(u.type==="throw")return n.method="throw",n.arg=u.arg,n.delegate=null,_;var y=u.arg;return y?y.done?(n[a.resultName]=y.value,n.next=a.nextLoc,n.method!=="return"&&(n.method="next",n.arg=void 0),n.delegate=null,_):y:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,_)}function O(a){var n={tryLoc:a[0]};1 in a&&(n.catchLoc=a[1]),2 in a&&(n.finallyLoc=a[2],n.afterLoc=a[3]),this.tryEntries.push(n)}function L(a){var n=a.completion||{};n.type="normal",delete n.arg,a.completion=n}function G(a){this.tryEntries=[{tryLoc:"root"}],a.forEach(O,this),this.reset(!0)}function P(a){if(a){var n=a[d];if(n)return n.call(a);if(typeof a.next=="function")return a;if(!isNaN(a.length)){var l=-1,u=function y(){for(;++l<a.length;)if(o.call(a,l))return y.value=a[l],y.done=!1,y;return y.value=void 0,y.done=!0,y};return u.next=u}}return{next:$}}function $(){return{value:void 0,done:!0}}return z.prototype=w,f(c,"constructor",w),f(w,"constructor",z),z.displayName=f(w,g,"GeneratorFunction"),t.isGeneratorFunction=function(a){var n=typeof a=="function"&&a.constructor;return!!n&&(n===z||(n.displayName||n.name)==="GeneratorFunction")},t.mark=function(a){return Object.setPrototypeOf?Object.setPrototypeOf(a,w):(a.__proto__=w,f(a,g,"GeneratorFunction")),a.prototype=Object.create(c),a},t.awrap=function(a){return{__await:a}},v(p.prototype),f(p.prototype,b,function(){return this}),t.AsyncIterator=p,t.async=function(a,n,l,u,y){y===void 0&&(y=Promise);var S=new p(x(a,n,l,u),y);return t.isGeneratorFunction(n)?S:S.next().then(function(C){return C.done?C.value:S.next()})},v(c),f(c,g,"Generator"),f(c,d,function(){return this}),f(c,"toString",function(){return"[object Generator]"}),t.keys=function(a){var n=[];for(var l in a)n.push(l);return n.reverse(),function u(){for(;n.length;){var y=n.pop();if(y in a)return u.value=y,u.done=!1,u}return u.done=!0,u}},t.values=P,G.prototype={constructor:G,reset:function(n){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(L),!n)for(var l in this)l.charAt(0)==="t"&&o.call(this,l)&&!isNaN(+l.slice(1))&&(this[l]=void 0)},stop:function(){this.done=!0;var n=this.tryEntries[0].completion;if(n.type==="throw")throw n.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var l=this;function u(E,R){return C.type="throw",C.arg=n,l.next=E,R&&(l.method="next",l.arg=void 0),!!R}for(var y=this.tryEntries.length-1;y>=0;--y){var S=this.tryEntries[y],C=S.completion;if(S.tryLoc==="root")return u("end");if(S.tryLoc<=this.prev){var D=o.call(S,"catchLoc"),U=o.call(S,"finallyLoc");if(D&&U){if(this.prev<S.catchLoc)return u(S.catchLoc,!0);if(this.prev<S.finallyLoc)return u(S.finallyLoc)}else if(D){if(this.prev<S.catchLoc)return u(S.catchLoc,!0)}else{if(!U)throw new Error("try statement without catch or finally");if(this.prev<S.finallyLoc)return u(S.finallyLoc)}}}},abrupt:function(n,l){for(var u=this.tryEntries.length-1;u>=0;--u){var y=this.tryEntries[u];if(y.tryLoc<=this.prev&&o.call(y,"finallyLoc")&&this.prev<y.finallyLoc){var S=y;break}}S&&(n==="break"||n==="continue")&&S.tryLoc<=l&&l<=S.finallyLoc&&(S=null);var C=S?S.completion:{};return C.type=n,C.arg=l,S?(this.method="next",this.next=S.finallyLoc,_):this.complete(C)},complete:function(n,l){if(n.type==="throw")throw n.arg;return n.type==="break"||n.type==="continue"?this.next=n.arg:n.type==="return"?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):n.type==="normal"&&l&&(this.next=l),_},finish:function(n){for(var l=this.tryEntries.length-1;l>=0;--l){var u=this.tryEntries[l];if(u.finallyLoc===n)return this.complete(u.completion,u.afterLoc),L(u),_}},catch:function(n){for(var l=this.tryEntries.length-1;l>=0;--l){var u=this.tryEntries[l];if(u.tryLoc===n){var y=u.completion;if(y.type==="throw"){var S=y.arg;L(u)}return S}}throw new Error("illegal catch attempt")},delegateYield:function(n,l,u){return this.delegate={iterator:P(n),resultName:l,nextLoc:u},this.method==="next"&&(this.arg=void 0),_}},t}r.exports=i,r.exports.__esModule=!0,r.exports.default=r.exports})(Be);var ee=he(),H=ee;try{regeneratorRuntime=ee}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=ee:Function("r","regeneratorRuntime = r")(ee)}const X=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,$e=typeof AbortController=="function",ie=$e?AbortController:class{constructor(){this.signal=new Ce}abort(e=new Error("This operation was aborted")){this.signal.reason=this.signal.reason||e,this.signal.aborted=!0,this.signal.dispatchEvent({type:"abort",target:this.signal})}},qe=typeof AbortSignal=="function",Qe=typeof ie.AbortSignal=="function",Ce=qe?AbortSignal:Qe?ie.AbortController:class{constructor(){this.reason=void 0,this.aborted=!1,this._listeners=[]}dispatchEvent(e){e.type==="abort"&&(this.aborted=!0,this.onabort(e),this._listeners.forEach(i=>i(e),this))}onabort(){}addEventListener(e,i){e==="abort"&&this._listeners.push(i)}removeEventListener(e,i){e==="abort"&&(this._listeners=this._listeners.filter(t=>t!==i))}},de=new Set,ae=(r,e)=>{const i=`LRU_CACHE_OPTION_${r}`;re(i)&&pe(i,`${r} option`,`options.${e}`,Q)},oe=(r,e)=>{const i=`LRU_CACHE_METHOD_${r}`;if(re(i)){const{prototype:t}=Q,{get:s}=Object.getOwnPropertyDescriptor(t,r);pe(i,`${r} method`,`cache.${e}()`,s)}},He=(r,e)=>{const i=`LRU_CACHE_PROPERTY_${r}`;if(re(i)){const{prototype:t}=Q,{get:s}=Object.getOwnPropertyDescriptor(t,r);pe(i,`${r} property`,`cache.${e}`,s)}},Fe=(...r)=>{typeof process=="object"&&process&&typeof process.emitWarning=="function"?process.emitWarning(...r):console.error(...r)},re=r=>!de.has(r),pe=(r,e,i,t)=>{de.add(r);const s=`The ${e} is deprecated. Please use ${i} instead.`;Fe(s,"DeprecationWarning",r,t)},q=r=>r&&r===Math.floor(r)&&r>0&&isFinite(r),Oe=r=>q(r)?r<=Math.pow(2,8)?Uint8Array:r<=Math.pow(2,16)?Uint16Array:r<=Math.pow(2,32)?Uint32Array:r<=Number.MAX_SAFE_INTEGER?te:null:null;class te extends Array{constructor(e){super(e),this.fill(0)}}class Ve{constructor(e){if(e===0)return[];const i=Oe(e);this.heap=new i(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}}class Q{constructor(e={}){const{max:i=0,ttl:t,ttlResolution:s=1,ttlAutopurge:o,updateAgeOnGet:h,updateAgeOnHas:d,allowStale:b,dispose:g,disposeAfter:f,noDisposeOnSet:x,noUpdateTTL:T,maxSize:_=0,maxEntrySize:A=0,sizeCalculation:z,fetchMethod:w,fetchContext:I,noDeleteOnFetchRejection:M,noDeleteOnStaleGet:F,allowStaleOnFetchRejection:c,allowStaleOnFetchAbort:v,ignoreFetchAbort:p}=e,{length:m,maxAge:O,stale:L}=e instanceof Q?{}:e;if(i!==0&&!q(i))throw new TypeError("max option must be a nonnegative integer");const G=i?Oe(i):Array;if(!G)throw new Error("invalid max value: "+i);if(this.max=i,this.maxSize=_,this.maxEntrySize=A||this.maxSize,this.sizeCalculation=z||m,this.sizeCalculation){if(!this.maxSize&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(this.fetchMethod=w||null,this.fetchMethod&&typeof this.fetchMethod!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.fetchContext=I,!this.fetchMethod&&I!==void 0)throw new TypeError("cannot set fetchContext without fetchMethod");if(this.keyMap=new Map,this.keyList=new Array(i).fill(null),this.valList=new Array(i).fill(null),this.next=new G(i),this.prev=new G(i),this.head=0,this.tail=0,this.free=new Ve(i),this.initialFill=1,this.size=0,typeof g=="function"&&(this.dispose=g),typeof f=="function"?(this.disposeAfter=f,this.disposed=[]):(this.disposeAfter=null,this.disposed=null),this.noDisposeOnSet=!!x,this.noUpdateTTL=!!T,this.noDeleteOnFetchRejection=!!M,this.allowStaleOnFetchRejection=!!c,this.allowStaleOnFetchAbort=!!v,this.ignoreFetchAbort=!!p,this.maxEntrySize!==0){if(this.maxSize!==0&&!q(this.maxSize))throw new TypeError("maxSize must be a positive integer if specified");if(!q(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.initializeSizeTracking()}if(this.allowStale=!!b||!!L,this.noDeleteOnStaleGet=!!F,this.updateAgeOnGet=!!h,this.updateAgeOnHas=!!d,this.ttlResolution=q(s)||s===0?s:1,this.ttlAutopurge=!!o,this.ttl=t||O||0,this.ttl){if(!q(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.initializeTTLTracking()}if(this.max===0&&this.ttl===0&&this.maxSize===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.max&&!this.maxSize){const P="LRU_CACHE_UNBOUNDED";re(P)&&(de.add(P),Fe("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",P,Q))}L&&ae("stale","allowStale"),O&&ae("maxAge","ttl"),m&&ae("length","sizeCalculation")}getRemainingTTL(e){return this.has(e,{updateAgeOnHas:!1})?1/0:0}initializeTTLTracking(){this.ttls=new te(this.max),this.starts=new te(this.max),this.setItemTTL=(t,s,o=X.now())=>{if(this.starts[t]=s!==0?o:0,this.ttls[t]=s,s!==0&&this.ttlAutopurge){const h=setTimeout(()=>{this.isStale(t)&&this.delete(this.keyList[t])},s+1);h.unref&&h.unref()}},this.updateItemAge=t=>{this.starts[t]=this.ttls[t]!==0?X.now():0},this.statusTTL=(t,s)=>{t&&(t.ttl=this.ttls[s],t.start=this.starts[s],t.now=e||i(),t.remainingTTL=t.now+t.ttl-t.start)};let e=0;const i=()=>{const t=X.now();if(this.ttlResolution>0){e=t;const s=setTimeout(()=>e=0,this.ttlResolution);s.unref&&s.unref()}return t};this.getRemainingTTL=t=>{const s=this.keyMap.get(t);return s===void 0?0:this.ttls[s]===0||this.starts[s]===0?1/0:this.starts[s]+this.ttls[s]-(e||i())},this.isStale=t=>this.ttls[t]!==0&&this.starts[t]!==0&&(e||i())-this.starts[t]>this.ttls[t]}updateItemAge(e){}statusTTL(e,i){}setItemTTL(e,i,t){}isStale(e){return!1}initializeSizeTracking(){this.calculatedSize=0,this.sizes=new te(this.max),this.removeItemSize=e=>{this.calculatedSize-=this.sizes[e],this.sizes[e]=0},this.requireSize=(e,i,t,s)=>{if(this.isBackgroundFetch(i))return 0;if(!q(t))if(s){if(typeof s!="function")throw new TypeError("sizeCalculation must be a function");if(t=s(i,e),!q(t))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return t},this.addItemSize=(e,i,t)=>{if(this.sizes[e]=i,this.maxSize){const s=this.maxSize-this.sizes[e];for(;this.calculatedSize>s;)this.evict(!0)}this.calculatedSize+=this.sizes[e],t&&(t.entrySize=i,t.totalCalculatedSize=this.calculatedSize)}}removeItemSize(e){}addItemSize(e,i){}requireSize(e,i,t,s){if(t||s)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache")}*indexes({allowStale:e=this.allowStale}={}){if(this.size)for(let i=this.tail;!(!this.isValidIndex(i)||((e||!this.isStale(i))&&(yield i),i===this.head));)i=this.prev[i]}*rindexes({allowStale:e=this.allowStale}={}){if(this.size)for(let i=this.head;!(!this.isValidIndex(i)||((e||!this.isStale(i))&&(yield i),i===this.tail));)i=this.next[i]}isValidIndex(e){return e!==void 0&&this.keyMap.get(this.keyList[e])===e}*entries(){for(const e of this.indexes())this.valList[e]!==void 0&&this.keyList[e]!==void 0&&!this.isBackgroundFetch(this.valList[e])&&(yield[this.keyList[e],this.valList[e]])}*rentries(){for(const e of this.rindexes())this.valList[e]!==void 0&&this.keyList[e]!==void 0&&!this.isBackgroundFetch(this.valList[e])&&(yield[this.keyList[e],this.valList[e]])}*keys(){for(const e of this.indexes())this.keyList[e]!==void 0&&!this.isBackgroundFetch(this.valList[e])&&(yield this.keyList[e])}*rkeys(){for(const e of this.rindexes())this.keyList[e]!==void 0&&!this.isBackgroundFetch(this.valList[e])&&(yield this.keyList[e])}*values(){for(const e of this.indexes())this.valList[e]!==void 0&&!this.isBackgroundFetch(this.valList[e])&&(yield this.valList[e])}*rvalues(){for(const e of this.rindexes())this.valList[e]!==void 0&&!this.isBackgroundFetch(this.valList[e])&&(yield this.valList[e])}[Symbol.iterator](){return this.entries()}find(e,i){for(const t of this.indexes()){const s=this.valList[t],o=this.isBackgroundFetch(s)?s.__staleWhileFetching:s;if(o!==void 0&&e(o,this.keyList[t],this))return this.get(this.keyList[t],i)}}forEach(e,i=this){for(const t of this.indexes()){const s=this.valList[t],o=this.isBackgroundFetch(s)?s.__staleWhileFetching:s;o!==void 0&&e.call(i,o,this.keyList[t],this)}}rforEach(e,i=this){for(const t of this.rindexes()){const s=this.valList[t],o=this.isBackgroundFetch(s)?s.__staleWhileFetching:s;o!==void 0&&e.call(i,o,this.keyList[t],this)}}get prune(){return oe("prune","purgeStale"),this.purgeStale}purgeStale(){let e=!1;for(const i of this.rindexes({allowStale:!0}))this.isStale(i)&&(this.delete(this.keyList[i]),e=!0);return e}dump(){const e=[];for(const i of this.indexes({allowStale:!0})){const t=this.keyList[i],s=this.valList[i],o=this.isBackgroundFetch(s)?s.__staleWhileFetching:s;if(o===void 0)continue;const h={value:o};if(this.ttls){h.ttl=this.ttls[i];const d=X.now()-this.starts[i];h.start=Math.floor(Date.now()-d)}this.sizes&&(h.size=this.sizes[i]),e.unshift([t,h])}return e}load(e){this.clear();for(const[i,t]of e){if(t.start){const s=Date.now()-t.start;t.start=X.now()-s}this.set(i,t.value,t)}}dispose(e,i,t){}set(e,i,{ttl:t=this.ttl,start:s,noDisposeOnSet:o=this.noDisposeOnSet,size:h=0,sizeCalculation:d=this.sizeCalculation,noUpdateTTL:b=this.noUpdateTTL,status:g}={}){if(h=this.requireSize(e,i,h,d),this.maxEntrySize&&h>this.maxEntrySize)return g&&(g.set="miss",g.maxEntrySizeExceeded=!0),this.delete(e),this;let f=this.size===0?void 0:this.keyMap.get(e);if(f===void 0)f=this.newIndex(),this.keyList[f]=e,this.valList[f]=i,this.keyMap.set(e,f),this.next[this.tail]=f,this.prev[f]=this.tail,this.tail=f,this.size++,this.addItemSize(f,h,g),g&&(g.set="add"),b=!1;else{this.moveToTail(f);const x=this.valList[f];if(i!==x){if(this.isBackgroundFetch(x)?x.__abortController.abort(new Error("replaced")):o||(this.dispose(x,e,"set"),this.disposeAfter&&this.disposed.push([x,e,"set"])),this.removeItemSize(f),this.valList[f]=i,this.addItemSize(f,h,g),g){g.set="replace";const T=x&&this.isBackgroundFetch(x)?x.__staleWhileFetching:x;T!==void 0&&(g.oldValue=T)}}else g&&(g.set="update")}if(t!==0&&this.ttl===0&&!this.ttls&&this.initializeTTLTracking(),b||this.setItemTTL(f,t,s),this.statusTTL(g,f),this.disposeAfter)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return this}newIndex(){return this.size===0?this.tail:this.size===this.max&&this.max!==0?this.evict(!1):this.free.length!==0?this.free.pop():this.initialFill++}pop(){if(this.size){const e=this.valList[this.head];return this.evict(!0),e}}evict(e){const i=this.head,t=this.keyList[i],s=this.valList[i];return this.isBackgroundFetch(s)?s.__abortController.abort(new Error("evicted")):(this.dispose(s,t,"evict"),this.disposeAfter&&this.disposed.push([s,t,"evict"])),this.removeItemSize(i),e&&(this.keyList[i]=null,this.valList[i]=null,this.free.push(i)),this.head=this.next[i],this.keyMap.delete(t),this.size--,i}has(e,{updateAgeOnHas:i=this.updateAgeOnHas,status:t}={}){const s=this.keyMap.get(e);if(s!==void 0)if(this.isStale(s))t&&(t.has="stale",this.statusTTL(t,s));else return i&&this.updateItemAge(s),t&&(t.has="hit"),this.statusTTL(t,s),!0;else t&&(t.has="miss");return!1}peek(e,{allowStale:i=this.allowStale}={}){const t=this.keyMap.get(e);if(t!==void 0&&(i||!this.isStale(t))){const s=this.valList[t];return this.isBackgroundFetch(s)?s.__staleWhileFetching:s}}backgroundFetch(e,i,t,s){const o=i===void 0?void 0:this.valList[i];if(this.isBackgroundFetch(o))return o;const h=new ie;t.signal&&t.signal.addEventListener("abort",()=>h.abort(t.signal.reason));const d={signal:h.signal,options:t,context:s},b=(_,A=!1)=>{const{aborted:z}=h.signal,w=t.ignoreFetchAbort&&_!==void 0;return t.status&&(z&&!A?(t.status.fetchAborted=!0,t.status.fetchError=h.signal.reason,w&&(t.status.fetchAbortIgnored=!0)):t.status.fetchResolved=!0),z&&!w&&!A?f(h.signal.reason):(this.valList[i]===T&&(_===void 0?T.__staleWhileFetching?this.valList[i]=T.__staleWhileFetching:this.delete(e):(t.status&&(t.status.fetchUpdated=!0),this.set(e,_,d.options))),_)},g=_=>(t.status&&(t.status.fetchRejected=!0,t.status.fetchError=_),f(_)),f=_=>{const{aborted:A}=h.signal,z=A&&t.allowStaleOnFetchAbort,w=z||t.allowStaleOnFetchRejection,I=w||t.noDeleteOnFetchRejection;if(this.valList[i]===T&&(!I||T.__staleWhileFetching===void 0?this.delete(e):z||(this.valList[i]=T.__staleWhileFetching)),w)return t.status&&T.__staleWhileFetching!==void 0&&(t.status.returnedStale=!0),T.__staleWhileFetching;if(T.__returned===T)throw _},x=(_,A)=>{this.fetchMethod(e,o,d).then(z=>_(z),A),h.signal.addEventListener("abort",()=>{(!t.ignoreFetchAbort||t.allowStaleOnFetchAbort)&&(_(),t.allowStaleOnFetchAbort&&(_=z=>b(z,!0)))})};t.status&&(t.status.fetchDispatched=!0);const T=new Promise(x).then(b,g);return T.__abortController=h,T.__staleWhileFetching=o,T.__returned=null,i===void 0?(this.set(e,T,{...d.options,status:void 0}),i=this.keyMap.get(e)):this.valList[i]=T,T}isBackgroundFetch(e){return e&&typeof e=="object"&&typeof e.then=="function"&&Object.prototype.hasOwnProperty.call(e,"__staleWhileFetching")&&Object.prototype.hasOwnProperty.call(e,"__returned")&&(e.__returned===e||e.__returned===null)}async fetch(e,{allowStale:i=this.allowStale,updateAgeOnGet:t=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:h=this.noDisposeOnSet,size:d=0,sizeCalculation:b=this.sizeCalculation,noUpdateTTL:g=this.noUpdateTTL,noDeleteOnFetchRejection:f=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:x=this.allowStaleOnFetchRejection,ignoreFetchAbort:T=this.ignoreFetchAbort,allowStaleOnFetchAbort:_=this.allowStaleOnFetchAbort,fetchContext:A=this.fetchContext,forceRefresh:z=!1,status:w,signal:I}={}){if(!this.fetchMethod)return w&&(w.fetch="get"),this.get(e,{allowStale:i,updateAgeOnGet:t,noDeleteOnStaleGet:s,status:w});const M={allowStale:i,updateAgeOnGet:t,noDeleteOnStaleGet:s,ttl:o,noDisposeOnSet:h,size:d,sizeCalculation:b,noUpdateTTL:g,noDeleteOnFetchRejection:f,allowStaleOnFetchRejection:x,allowStaleOnFetchAbort:_,ignoreFetchAbort:T,status:w,signal:I};let F=this.keyMap.get(e);if(F===void 0){w&&(w.fetch="miss");const c=this.backgroundFetch(e,F,M,A);return c.__returned=c}else{const c=this.valList[F];if(this.isBackgroundFetch(c)){const L=i&&c.__staleWhileFetching!==void 0;return w&&(w.fetch="inflight",L&&(w.returnedStale=!0)),L?c.__staleWhileFetching:c.__returned=c}const v=this.isStale(F);if(!z&&!v)return w&&(w.fetch="hit"),this.moveToTail(F),t&&this.updateItemAge(F),this.statusTTL(w,F),c;const p=this.backgroundFetch(e,F,M,A),m=p.__staleWhileFetching!==void 0,O=m&&i;return w&&(w.fetch=m&&v?"stale":"refresh",O&&v&&(w.returnedStale=!0)),O?p.__staleWhileFetching:p.__returned=p}}get(e,{allowStale:i=this.allowStale,updateAgeOnGet:t=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,status:o}={}){const h=this.keyMap.get(e);if(h!==void 0){const d=this.valList[h],b=this.isBackgroundFetch(d);return this.statusTTL(o,h),this.isStale(h)?(o&&(o.get="stale"),b?(o&&(o.returnedStale=i&&d.__staleWhileFetching!==void 0),i?d.__staleWhileFetching:void 0):(s||this.delete(e),o&&(o.returnedStale=i),i?d:void 0)):(o&&(o.get="hit"),b?d.__staleWhileFetching:(this.moveToTail(h),t&&this.updateItemAge(h),d))}else o&&(o.get="miss")}connect(e,i){this.prev[i]=e,this.next[e]=i}moveToTail(e){e!==this.tail&&(e===this.head?this.head=this.next[e]:this.connect(this.prev[e],this.next[e]),this.connect(this.tail,e),this.tail=e)}get del(){return oe("del","delete"),this.delete}delete(e){let i=!1;if(this.size!==0){const t=this.keyMap.get(e);if(t!==void 0)if(i=!0,this.size===1)this.clear();else{this.removeItemSize(t);const s=this.valList[t];this.isBackgroundFetch(s)?s.__abortController.abort(new Error("deleted")):(this.dispose(s,e,"delete"),this.disposeAfter&&this.disposed.push([s,e,"delete"])),this.keyMap.delete(e),this.keyList[t]=null,this.valList[t]=null,t===this.tail?this.tail=this.prev[t]:t===this.head?this.head=this.next[t]:(this.next[this.prev[t]]=this.next[t],this.prev[this.next[t]]=this.prev[t]),this.size--,this.free.push(t)}}if(this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return i}clear(){for(const e of this.rindexes({allowStale:!0})){const i=this.valList[e];if(this.isBackgroundFetch(i))i.__abortController.abort(new Error("deleted"));else{const t=this.keyList[e];this.dispose(i,t,"delete"),this.disposeAfter&&this.disposed.push([i,t,"delete"])}}if(this.keyMap.clear(),this.valList.fill(null),this.keyList.fill(null),this.ttls&&(this.ttls.fill(0),this.starts.fill(0)),this.sizes&&this.sizes.fill(0),this.head=0,this.tail=0,this.initialFill=1,this.free.length=0,this.calculatedSize=0,this.size=0,this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift())}get reset(){return oe("reset","clear"),this.clear}get length(){return He("length","size"),this.size}static get AbortController(){return ie}static get AbortSignal(){return Ce}}const Ke=Q;var ve=Object.prototype.hasOwnProperty;function ce(r,e){var i,t;if(r===e)return!0;if(r&&e&&(i=r.constructor)===e.constructor){if(i===Date)return r.getTime()===e.getTime();if(i===RegExp)return r.toString()===e.toString();if(i===Array){if((t=r.length)===e.length)for(;t--&&ce(r[t],e[t]););return t===-1}if(!i||typeof r=="object"){t=0;for(i in r)if(ve.call(r,i)&&++t&&!ve.call(e,i)||!(i in e)||!ce(r[i],e[i]))return!1;return Object.keys(e).length===t}}return r!==r&&e!==e}var V={REQUEST_START:"REQUEST_START",REQUEST_END:"REQUEST_END"},we={manual:!1,useCache:!0,ssr:!0,autoCancel:!0},Y=Re();Y.__ssrPromises;Y.resetConfigure;Y.configure;Y.loadCache;Y.serializeCache;Y.clearCache;function Ye(r){return r&&r.nativeEvent&&r.nativeEvent instanceof Event}function Se(r){var e=j({},r);return delete e.cancelToken,JSON.stringify(e)}function _e(r){return typeof r=="string"?{url:r}:Object.assign({},r)}function Re(r){var e,i,t,s=[];function o(){e=new Ke({max:500}),i=Z,t=we}function h(c){c===void 0&&(c={}),c.axios!==void 0&&(i=c.axios),c.cache!==void 0&&(e=c.cache),c.defaultOptions!==void 0&&(t=j({},we,c.defaultOptions))}o(),h(r);function d(c){e.load(c)}function b(){return g.apply(this,arguments)}function g(){return g=ne(H.mark(function c(){var v;return H.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return v=[].concat(s),s.length=0,m.next=4,Promise.all(v);case 4:return m.abrupt("return",e.dump());case 5:case"end":return m.stop()}},c)})),g.apply(this,arguments)}function f(){e.clear()}return Object.assign(F,{__ssrPromises:s,resetConfigure:o,configure:h,loadCache:d,serializeCache:b,clearCache:f});function x(c,v){if(e){var p=Se(c),m=j({},v);delete m.config,delete m.request,e.set(p,m)}}function T(c,v){var p=!v.manual&&A(c,v);return j({loading:!v.manual&&!p,error:null},p?{data:p.data,response:p}:null)}function _(c,v){var p;switch(v.type){case V.REQUEST_START:return j({},c,{loading:!0,error:null});case V.REQUEST_END:return j({},c,{loading:!1},v.error?{}:{data:v.payload.data,error:null},(p={},p[v.error?"error":"response"]=v.payload,p))}}function A(c,v,p){if(!(!e||!v.useCache)){var m=Se(c),O=e.get(m);return O&&p&&p({type:V.REQUEST_END,payload:O}),O}}function z(c,v){return w.apply(this,arguments)}function w(){return w=ne(H.mark(function c(v,p){var m;return H.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.prev=0,p({type:V.REQUEST_START}),L.next=4,i(v);case 4:return m=L.sent,x(v,m),p({type:V.REQUEST_END,payload:m}),L.abrupt("return",m);case 10:throw L.prev=10,L.t0=L.catch(0),Z.isCancel(L.t0)||p({type:V.REQUEST_END,payload:L.t0,error:!0}),L.t0;case 14:case"end":return L.stop()}},c,null,[[0,10]])})),w.apply(this,arguments)}function I(c,v,p){return M.apply(this,arguments)}function M(){return M=ne(H.mark(function c(v,p,m){return H.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.abrupt("return",A(v,p,m)||z(v,m));case 1:case"end":return L.stop()}},c)})),M.apply(this,arguments)}function F(c,v){var p=B.useMemo(function(){return _e(c)},be(c)),m=B.useMemo(function(){return j({},t,v)},be(v)),O=B.useRef(),L=B.useReducer(_,T(p,m)),G=L[0],P=L[1];typeof window>"u"&&m.ssr&&!m.manual&&F.__ssrPromises.push(i(p));var $=B.useCallback(function(){O.current&&O.current.cancel()},[]),a=B.useCallback(function(l){return m.autoCancel&&$(),O.current=Z.CancelToken.source(),l.cancelToken=O.current.token,l},[$,m.autoCancel]);B.useEffect(function(){return m.manual||I(a(p),m,P).catch(function(){}),function(){m.autoCancel&&$()}},[p,m,a,$]);var n=B.useCallback(function(l,u){return l=_e(l),I(a(j({},p,Ye(l)?null:l)),j({useCache:!1},u),P)},[p,a]);return[G,n,$]}}function be(r){var e=B.useRef(),i=B.useRef(0);return ce(r,e.current)||(e.current=r,i.current+=1),[i.current]}const Je={baseURL:"/",headers:{Authorization:`Bearer ${sessionStorage.getItem("Authorization")}`}},Te=Re({axios:Z.create(Je)}),Xe=({id:r,value:e,setIsEditing:i,setItemText:t,updateChecked:s})=>{const[o]=N.useState(e),[h,d]=N.useState(e);return K(fe,{children:[k(ke,{name:"EditItem",size:"xs",value:h,onChange:f=>d(f.currentTarget.value)}),k(ue,{size:"xs",onClick:()=>{i(!1),o!==h&&s({params:{_id:r,text:h}}).then(()=>{t(h)})},children:"✓"})]})},Ze=({item:r,refetch:e})=>{const{t:i}=xe("beginnerProjects"),[t,s]=N.useState(r.completed),[o,h]=N.useState(!1),[d,b]=N.useState(r.text),[{loading:g},f]=Te({url:"/api/todos/item",method:"put"},{manual:!0}),[{loading:x},T]=Te({url:"/api/todos/item",method:"delete"},{manual:!0}),_=()=>{f({params:{_id:r._id,completed:!t}}).then(()=>s(!t))},A=()=>{h(!0)},z=()=>{T({params:{_id:r._id}}).then(()=>{De.info(i("Todos.ItemDeleted")),e()})};return K("li",{className:"mb-2 flex items-center",children:[K("div",{className:"flex w-10/12 basis-11/12 gap-2",children:[k(Ae,{checked:t,onChange:_,disabled:g}),o?k(Xe,{id:r._id,value:d,setIsEditing:h,setItemText:b,updateChecked:f}):k("p",{className:"text-ellipsis overflow-hidden",onDoubleClick:A,children:d})]}),k("div",{className:"flex basis-1/12 justify-end",children:k(ue,{shape:"square",size:"sm",color:"ghost",disabled:x,onClick:z,children:k(Ne,{color:"red",size:20})})})]})},ot=()=>{const{t:r}=xe("beginnerProjects"),{isLoading:e,isError:i,data:t,refetch:s}=Ue({queryKey:["todos"],queryFn:async()=>{const{data:o}=await ze.get("/api/todos/item");return o}});return e||!t?k(Pe,{}):K(je,{className:"w-11/12 p-4 lg:w-6/12",children:[k("h5",{className:"text-center",children:r("Todos.title")}),k("p",{className:"text-center",children:r("Todos.EditTextInfo")}),k(We,{refetch:s}),k("ol",{start:1,children:t.map(o=>k(Ze,{item:o,refetch:s},o._id))})]})};export{ot as default};
