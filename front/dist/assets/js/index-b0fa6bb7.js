import{u as x,r as i,f as w,a as t,j as o,i as g,F as y,d as S}from"./index-f0b6871d.js";import{T as b}from"./Table-286e33b3.js";import{I as N}from"./Input-0da03ae6.js";import"http://localhost:3000/@react-refresh";const v=(r,n)=>{const{i18n:c}=x(),l="6d4eb092da354c2d5c8ad3e0e4e7672a",[u,h]=i.useState(null),[p,m]=i.useState(!0),[a,e]=i.useState(null);return i.useEffect(()=>{e(null),w("https://api.openweathermap.org/data/2.5/forecast",{params:{lat:r,lon:n,appid:l,units:"metric",cnt:8,lang:c.resolvedLanguage}}).then(s=>{h(s.data),m(!1)}).catch(s=>e(s.message))},[r,n,c.resolvedLanguage]),{data:u,loading:p,error:a}},d=i.forwardRef(({children:r},n)=>t("td",{ref:n,className:"text-center",children:r})),D=({data:r})=>{const{t:n}=x("beginnerProjects"),c=()=>r.list.map((a,e)=>{const s=new Date(a.dt*1e3).toLocaleTimeString("en-GB",{hour:"numeric"});return t(d,{children:s},e)}),l=()=>r.list.map((a,e)=>{var s=a.weather[0].icon,f="https://openweathermap.org/img/w/"+s+".png";return t("td",{children:t("img",{src:f,alt:"",className:"m-auto"})},e)}),u=()=>r.list.map((a,e)=>t(d,{children:~~a.main.temp},e)),h=()=>r.list.map((a,e)=>t(d,{children:Math.trunc(a.pop*100)},e)),p=()=>r.list.map((a,e)=>t(d,{children:~~a.wind.speed},e)),m=()=>r.list.map((a,e)=>t(d,{children:Math.round(a.main.humidity/5)*5},e));return o("tbody",{children:[o("tr",{children:[t(d,{children:n("Weather.Time")}),c()]}),o("tr",{children:[t(d,{}),l()]}),o("tr",{children:[t(d,{children:"â„ƒ"}),u()]}),o("tr",{children:[o(d,{children:[n("Weather.Precipitation"),t("p",{className:"text-center text-sm",children:"(%)"})]}),h()]}),o("tr",{children:[o(d,{children:[n("Weather.Wind"),t("p",{className:"text-center text-sm",children:"(m/s)"})]}),p()]}),o("tr",{children:[o(d,{children:[n("Weather.Humidity"),t("p",{className:"text-center text-sm",children:"(%)"})]}),m()]})]})},C=i.forwardRef(({id:r,datalist:n,city:c,setCity:l,...u},h)=>{const[p,m]=i.useState(n.length>0),a=(e,s,f)=>()=>{m(!1),document.activeElement.blur(),l({...c,name:e,latitude:s,longitude:f})};return i.useEffect(()=>{n.length>0?m(!0):m(!1)},[n]),o("div",{className:"flex flex-col items-center",children:[t(N,{...u}),t(g,{open:p,horizontal:"center",children:t(g.Menu,{children:n.map((e,s)=>t(g.Item,{onClick:a(e.name,e.latitude,e.longitude),children:e.name+", "+e.country},s))})})]})}),T=(r,n)=>{const[c,l]=i.useState(r);return i.useEffect(()=>{const u=setTimeout(()=>{l(r)},n);return()=>{clearTimeout(u)}},[r]),c},W=({city:r,setCity:n})=>{const[c,l]=i.useState(""),u=T(c,400),[h,p]=i.useState([]),m="tuZGFbhh7/GYbMXDUAcg6Q==vRUiSCsYjQZ7NFN2",a=s=>{s?w.get("https://api.api-ninjas.com/v1/city",{params:{name:s,limit:5},headers:{"X-Api-Key":m}}).then(f=>{p(f.data)}):p([])},e=s=>{l(s.target.value)};return i.useEffect(()=>{a(c)},[u]),t(y,{children:t(C,{name:"CitySearch",datalist:h,value:c,onChange:e,city:r,setCity:n})})},L=()=>{const{t:r}=x("beginnerProjects"),[n,c]=i.useState({name:"Seoul, KR",latitude:37.5833,longitude:127}),{data:l,loading:u,error:h}=v(n.latitude,n.longitude);return u||!l?null:o(S,{className:"w-full overflow-x-auto p-4",children:[t(W,{city:n,setCity:c}),h?null:o("div",{className:"m-2 text-center text-lg",children:[r("Weather.Location"),":"," ",t("span",{className:"capitalize",children:n.name})]}),t(b,{className:"w-full",children:t(D,{data:l})})]})};export{L as default};
