import{r as c,t as m,c as p,a as e,u as f,j as u,B as h,M as I,d as k}from"./index-7a3911a6.js";import{L as N}from"./LoadingEffect-b05355f6.js";import{i as d}from"./axiosAPI-8f9aed95.js";import{I as v}from"./Input-7bac181d.js";import{u as E}from"./useQuery-abfee9af.js";const g=c.forwardRef(({children:t,size:r,vertical:s,className:n,...i},a)=>{const o=m("input-group",n,p({[`input-group-${r}`]:r,"input-group-vertical":s}));return e("label",{...i,className:o,ref:a,children:t})});g.displayName="InputGroup";const j=({refetch:t})=>{const{t:r}=f("beginnerProjects"),[s,n]=c.useState("");return e("div",{className:"my-4",children:e("form",{onSubmit:o=>{o.preventDefault(),d.post("/api/todos/item",{text:s}).then(l=>{n(""),t()})},children:u(g,{className:"justify-center",children:[e(v,{name:"AddTodo",value:s,onChange:o=>{n(o.currentTarget.value)}}),e(h,{type:"submit",children:r("Todos.AddItem")})]})})})},b=c.forwardRef(({color:t,size:r,indeterminate:s,className:n,...i},a)=>{const o=m("checkbox",n,p({[`checkbox-${r}`]:r,[`checkbox-${t}`]:t})),l=c.useRef(null);return c.useImperativeHandle(a,()=>l.current),c.useEffect(()=>{l.current&&(s?l.current.indeterminate=!0:l.current.indeterminate=!1)},[s]),e("input",{...i,ref:l,type:"checkbox",className:o})});b.displayName="Checkbox";const S=({item:t,refetch:r})=>{const[s,n]=c.useState(t.completed),[i,a]=c.useState(!1),[o,l]=c.useState(!1),x=()=>{l(!0)},y=T=>{a(!0),n(!s)};return c.useEffect(()=>{i&&d.put("/api/todos/item",null,{params:{_id:t._id,completed:s}}).then(()=>a(!1))},[s]),c.useEffect(()=>{o&&d.delete("/api/todos/item",{params:{_id:t._id}}).then(()=>{r(),l(!1)})},[o]),u("li",{className:"mb-2 flex gap-2",children:[e(b,{checked:s,onChange:y,disabled:i}),t.text,e("div",{className:"flex basis-10/12 justify-end",children:e(h,{shape:"square",size:"sm",color:"ghost",disabled:o,onClick:x,children:e(I,{color:"red",size:20})})})]})},q=()=>{const{t}=f("beginnerProjects"),{isLoading:r,isError:s,data:n,refetch:i}=E({queryKey:["todos"],queryFn:async()=>{const{data:a}=await d.get("/api/todos/item");return a}});return r||!n?e(N,{}):u(k,{className:"w-1/2 p-4",children:[e("h5",{className:"text-center",children:t("Todos.title")}),e(j,{refetch:i}),e("ol",{start:1,children:n.map(a=>e(S,{item:a,refetch:i},a._id))})]})};export{q as default};
