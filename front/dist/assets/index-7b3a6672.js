import{u as g,r as i,f as x,a as e,j as s,F as y,B as b,i as S,d as w}from"./index-5ecb6091.js";import{T as N}from"./Table-40349001.js";import{I as v}from"./Input-be820163.js";import{I as D}from"./InputGroup-a584c7f7.js";const T=r=>{const{i18n:t}=g(),o="6d4eb092da354c2d5c8ad3e0e4e7672a",[l,c]=i.useState(null),[m,h]=i.useState(!0),[p,a]=i.useState(null);return i.useEffect(()=>{a(null),x("https://api.openweathermap.org/data/2.5/forecast",{params:{q:r,appid:o,units:"metric",cnt:8,lang:t.resolvedLanguage}}).then(n=>{c(n.data),h(!1)}).catch(n=>a(n.message))},[r,t.resolvedLanguage]),{data:l,loading:m,error:p}},u=i.forwardRef(({children:r},t)=>e("td",{ref:t,className:"text-center",children:r})),W=({data:r})=>{const{t}=g("beginnerProjects"),o=()=>r.list.map((a,n)=>{const d=new Date(a.dt*1e3).toLocaleTimeString("en-GB",{hour:"numeric"});return e(u,{children:d},n)}),l=()=>r.list.map((a,n)=>{var d=a.weather[0].icon,f="https://openweathermap.org/img/w/"+d+".png";return e("td",{children:e("img",{src:f,alt:"",className:"m-auto"})},n)}),c=()=>r.list.map((a,n)=>e(u,{children:~~a.main.temp},n)),m=()=>r.list.map((a,n)=>e(u,{children:Math.trunc(a.pop*100)},n)),h=()=>r.list.map((a,n)=>e(u,{children:~~a.wind.speed},n)),p=()=>r.list.map((a,n)=>e(u,{children:Math.round(a.main.humidity/5)*5},n));return s("tbody",{children:[s("tr",{children:[e(u,{children:t("Weather.Time")}),o()]}),s("tr",{children:[e(u,{}),l()]}),s("tr",{children:[e(u,{children:"â„ƒ"}),c()]}),s("tr",{children:[s(u,{children:[t("Weather.Precipitation"),e("p",{className:"text-center text-sm",children:"(%)"})]}),m()]}),s("tr",{children:[s(u,{children:[t("Weather.Wind"),e("p",{className:"text-center text-sm",children:"(m/s)"})]}),h()]}),s("tr",{children:[s(u,{children:[t("Weather.Humidity"),e("p",{className:"text-center text-sm",children:"(%)"})]}),p()]})]})},j=i.forwardRef(({id:r,datalist:t,...o},l)=>s(y,{children:[e(v,{list:"datalist",...o}),e("datalist",{id:"datalist",children:t.map((c,m)=>e("option",{value:c.city+", "+c.country},m))})]})),I=(r,t)=>{const[o,l]=i.useState(r);return i.useEffect(()=>{const c=setTimeout(()=>{l(r)},t);return()=>{clearTimeout(c)}},[r]),o},C=({setCity:r})=>{const[t,o]=i.useState(""),l=I(t,300),[c,m]=i.useState([]),h="6227ce1a213a4c48ac09bcc3b564a1b2",p=d=>{d&&x.get("https://api.geoapify.com/v1/geocode/autocomplete",{params:{text:d,apiKey:h,limit:5,lang:"en",format:"json",type:"city"}}).then(f=>{m(f.data.results)})},a=d=>{o(d.target.value)},n=d=>{d.preventDefault(),r(t)};return i.useEffect(()=>{p(t)},[l]),e("form",{onSubmit:n,children:s(D,{className:"justify-center",children:[e(j,{name:"CitySearch",datalist:c,value:t,onChange:a}),e(b,{type:"submit",children:e(S,{})})]})})},F=()=>{const{t:r}=g("beginnerProjects"),[t,o]=i.useState("Seoul"),{data:l,loading:c,error:m}=T(t);return c||!l?null:s(w,{className:"w-full overflow-x-auto p-4",children:[e(C,{setCity:o}),m?null:s("div",{className:"m-2 text-center text-lg",children:[r("Weather.Location"),": ",e("span",{className:"capitalize",children:t})]}),e(N,{className:"w-full",children:e(W,{data:l})})]})};export{F as default};
